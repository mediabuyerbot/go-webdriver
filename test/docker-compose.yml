version: '3.4'

x-common-env: &env
  WEBGO_CHROMEDRIVER_ADDR: 9594
  WEBGO_FIREFOXDRIVER_ADDR: 9595

networks:
  go-webdriver-net:
    driver: bridge

services:
  chromedriver:
    image: robcherry/docker-chromedriver:latest
    environment:
      CHROMEDRIVER_WHITELISTED_IPS: ''
    ports:
      - 9594:4444
    networks:
      - go-webdriver-net

  firefoxdriver:
    image: wakaba/docker-firefoxdriver:stable
    ports:
      - 9595:9516
    networks:
      - go-webdriver-net

  go-webdriver:
    environment:
        *env
    depends_on:
      - chromedriver
      - firefoxdriver
    build:
      context: .
    volumes:
      - $PWD:/go/src/github.com/mediabuyerbot/go-webdriver
    networks:
      - go-webdriver-net
